<div class="lobby-container">
  <div class="lobby-card">
    <div class="header-with-info">
      <h1><img src="assets/belletta.png" alt="Belotta" style="height: 1.5em; vertical-align: middle; margin-right: 10px;"> Belotta Arilla</h1>
      <button class="info-btn" (click)="showInfo()" title="Informazioni">
        <span>â„¹</span>
      </button>
    </div>

    <div class="input-group">
      <input 
        type="text" 
        [(ngModel)]="playerName" 
        placeholder="Il tuo nome"
        maxlength="20"
        (keyup.enter)="!showJoinForm ? createRoom() : joinRoom()"
      />
    </div>

    <div class="button-group" *ngIf="!showJoinForm">
      <button class="btn-primary" (click)="createRoom()" [disabled]="!playerName.trim()">
        Crea Partita
      </button>
      <button class="btn-secondary" (click)="toggleJoinForm()">
        Unisciti a Partita
      </button>
    </div>

    <div class="join-form" *ngIf="showJoinForm">
      <div class="input-group">
        <input
          type="text"
          [(ngModel)]="roomCode"
          placeholder="Codice stanza"
          maxlength="8"
          (keyup.enter)="joinRoom()"
          style="text-transform: uppercase"
        />
      </div>
      <div class="button-group">
        <button class="btn-primary" (click)="joinRoom()" [disabled]="!playerName.trim() || !roomCode.trim()">
          Entra
        </button>
        <button class="btn-secondary" (click)="toggleJoinForm()">
          Annulla
        </button>
      </div>

      <div class="active-rooms" *ngIf="activeRooms.length > 0">
        <h3>Partite Attive</h3>
        <div class="room-list">
          <div
            class="room-item"
            *ngFor="let room of activeRooms"
            (click)="joinActiveRoom(room.code)"
          >
            <div class="room-info">
              <span class="room-code">{{ room.code }}</span>
              <span class="room-host">Host: {{ room.hostName }}</span>
              <span class="room-players">{{ room.playerCount }}/4 giocatori</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>